webpackJsonp([161],{1367:function(t,e,a){var n=a(1368);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(227)("98148ae4",n,!0)},1368:function(t,e,a){e=t.exports=a(226)(),e.push([t.i,"\n.authenname[data-v-5d1bc322]{background: #fff;border: 1px solid #fff;box-sizing: border-box;\n}\n.authennameDiv[data-v-5d1bc322]{width: 90%;margin-left: 5%;background: #f8f8f8;border-radius: 5px;padding: 20px 0;margin-top: 20px;\n}\n.authen_box[data-v-5d1bc322] {display: -webkit-box;display: -webkit-flex;display: flex;\n}\n.authen_box div[data-v-5d1bc322]{width: 40%;height: 100px;margin: 0 4.5%;\n}\n.authen_box div img[data-v-5d1bc322]{width: 100%;height: 100%;\n}\n.text_style[data-v-5d1bc322]{font-size: 13px;color: #3E3E3E;margin-left: 4.5%;margin-top: 30px;\n}\n.text_styles[data-v-5d1bc322]{margin: 10px 4.5% !important;\n}\n.authen_style[data-v-5d1bc322]{text-align: center;\n}\n.authen_style img[data-v-5d1bc322]{width: 90%;\n}\nbutton[data-v-5d1bc322]{width: 90%;height: 40px;background: #E83428;border-radius: 5px;color: #fff;margin-left: 5%;border: none;margin-top: 50px;margin-bottom: 30px;\n}\r\n",""])},1369:function(t,e,a){var n=a(1370);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(227)("6d566ce4",n,!0)},1370:function(t,e,a){e=t.exports=a(226)(),e.push([t.i,"\n#vux_view_box_body{background: #fff;\n}\r\n",""])},1371:function(t,e,a){"use strict";var n=a(66),s=a(64),o=a.n(s),i=a(60),r=a(70),u=a.n(r);e.a={components:{Toast:n.a,cookie:o.a},data:function(){return{btnNum:0,userData:{},userId:"",timestamp:"",nonceStr:"",signature:"",url:"",userphoto1:"../../static/credit/addphoto.png",userphoto2:"../../static/credit/addphoto.png",btnFlag:!0,state:""}},methods:{submitClick:function(){"../../static/credit/addphoto.png"==this.userphoto1||"../../static/credit/addphoto.png"==this.userphoto2?this.$vux.toast.text("上传图片后才能提交哦","middle"):1==++this.btnNum&&this.getMemberProfile()},realAuthAdd:function(t){var e=this,a={MemberId:this.userId,AuthImg1:this.userphoto1,AuthImg2:this.userphoto2,AuthState:t,Remark:""};this.$http({method:"post",url:i.a.realAuthAdd,data:a}).then(function(a){"Exc Success"==a.data?-1==t?e.$router.push({path:"/component/authenexamine",query:{isSuccess:1}}):0==t&&e.$router.push({path:"/component/authenexamine",query:{isSuccess:0}}):e.$router.push({path:"/component/authenexamine",query:{isSuccess:1}})})},getMemberAuth:function(){var t=this;this.$http({method:"post",url:i.a.getMemberAuth+"?memberId="+this.userId}).then(function(e){var a=JSON.parse(e.data);null==a?(t.btnFlag=!0,t.state=0):0==a.AuthState||1==a.AuthState?(t.userphoto1=a.AuthImg1,t.userphoto2=a.AuthImg2,t.btnFlag=!1):-1==a.AuthState&&(t.userphoto1=a.AuthImg1,t.userphoto2=a.AuthImg2,t.btnFlag=!0,t.state=1)})},realAuthUpdate:function(t){var e=this,a={MemberId:this.userId,AuthImg1:this.userphoto1,AuthImg2:this.userphoto2,AuthState:t,Remark:""};this.$http({method:"post",url:i.a.realAuthUpdate,data:a}).then(function(a){"Exc Success"==a.data?-1==t?e.$router.push({path:"/component/authenexamine",query:{isSuccess:1}}):0==t&&e.$router.push({path:"/component/authenexamine",query:{isSuccess:0}}):e.$router.push({path:"/component/authenexamine",query:{isSuccess:1}})})},getMemberProfile:function(){var t=this,e={MemberId:this.userId};this.$http({method:"POST",url:i.a.getMemberProfile,data:e}).then(function(e){var a=JSON.parse(e.data);"美食爱好者"==a[0].Position||"调味品供货商"==a[0].Position?0==t.state?t.realAuthAdd(-1):1==t.state&&t.realAuthUpdate(-1):0==t.state?t.realAuthAdd(0):1==t.state&&t.realAuthUpdate(0)})},setConfig:function(){var t=this;this.$http({method:"GET",url:i.a.getTimestampAndNonceStr}).then(function(e){var a=e.data,n=a.split("|");t.timestamp=parseInt(n[0]),t.nonceStr=n[1];var s="?noncestr="+t.nonceStr+"&timestamp="+t.timestamp+"&url="+t.url;t.$http({method:"GET",url:i.a.getJsapiTicketSignature+s}).then(function(e){t.signature=e.data,u.a.config({debug:!1,appId:i.a.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["chooseImage","uploadImage"]})})})},imgUpload:function(t){var e="",a=this;u.a.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){e=n.localIds,u.a.uploadImage({localId:e[0],isShowProgressTips:1,success:function(e){var n=e.serverId;a.$http({method:"GET",url:i.a.saveWeChatImage+"?serverId="+n}).then(function(e){var n="https://s3-010-shinho-ecshool-prd-bjs.s3.cn-north-1.amazonaws.com.cn"+e.data;1==t?a.userphoto1=n:2==t&&(a.userphoto2=n)})}})},fail:function(t){}})},onChange:function(t){var e=this;t?this.$vux.toast.show({text:"Hello World",onShow:function(){console.log("Plugin: I'm showing")},onHide:function(){console.log("Plugin: I'm hiding"),e.show9=!1}}):this.$vux.toast.hide()}},mounted:function(){this.userData=o.a.get("WeiXinUser",function(t){for(var e=t.split("&"),a={},n=0;n<e.length;n++){var s=e[n].split("=");a[s[0]]=s[1]}return a}),this.userId=Number(this.userData.UserId),this.getMemberAuth();var t=window.location.href.split("#")[0];this.url=encodeURIComponent(t),this.setConfig()}}},1372:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"authenname"},[a("div",{staticClass:"authennameDiv"},[a("div",{staticClass:"authen_box"},[a("div",[a("img",{attrs:{src:t.userphoto1},on:{click:function(e){t.imgUpload(1)}}})]),t._v(" "),a("div",[a("img",{attrs:{src:t.userphoto2},on:{click:function(e){t.imgUpload(2)}}})])]),t._v(" "),a("p",{staticClass:"text_style"},[t._v("以下二种组合任选一种上传")]),t._v(" "),a("p",{staticClass:"text_style text_styles"},[t._v("一、")]),t._v(" "),t._m(0),t._v(" "),a("p",{staticClass:"text_style text_styles"},[t._v("二、")]),t._v(" "),t._m(1)]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.btnFlag,expression:"btnFlag"}],on:{click:t.submitClick}},[t._v("提交认证")])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"authen_style"},[n("img",{attrs:{src:a(1373)}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"authen_style"},[n("img",{attrs:{src:a(1374)}})])}],o={render:n,staticRenderFns:s};e.a=o},1373:function(t,e,a){t.exports=a.p+"static/img/authenname1.3ec661d.png"},1374:function(t,e,a){t.exports=a.p+"static/img/authenname2.0eb85be.png"},304:function(t,e,a){"use strict";function n(t){a(1367),a(1369)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(1371),o=a(1372),i=a(0),r=n,u=i(s.a,o.a,r,"data-v-5d1bc322",null);e.default=u.exports}});